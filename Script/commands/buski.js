const activeSpam = {};
const blockedUsers = {};

module.exports.config = {
    name: "buski",
    version: "3.0.0",
    hasPermssion: 0,
    credits: "MR ZUYAN", // Don't change credit
    description: "Bangladeshi gali spam to mentioned person (only specific UIDs allowed)",
    commandCategory: "fun",
    usages: "/buski @mention | /buski stop",
    cooldowns: 5
};

// âœ… Allowed UIDs (add more if needed)
const allowedUIDs = ["100006158207808"]; // Add more UIDs as needed

// ğŸ’¥ Gali List
const galiList = [  
  "à¦¤à§‹à¦° à¦®à¦¤à§‹ à¦—à¦¾à¦§à¦¾ à¦¦à§‡à¦–à¦²à§‡ à¦—à¦°à§ à¦¹à¦¿à¦‚à¦¸à§‡ à¦•à¦°à§‡ ğŸ„",  
  "à¦¤à§à¦‡ à¦¯à§‡ à¦¬à§à¦¦à§à¦§à¦¿à¦° à¦•à¦¾à¦à¦šà¦¾, à¦†à¦‡à¦•à¦¿à¦‰ à¦ªà¦°à§€à¦•à§à¦·à¦¾à§Ÿ à¦«à§‡à¦‡à¦² à¦•à¦°à¦¬à¦¿ ğŸ“‰",  
  "à¦¤à§‹à¦° à¦®à¦¾à¦¥à¦¾à§Ÿ à¦ªà¦¾à¦–à¦¿ à¦¬à¦¾à¦¸à¦¾ à¦¬à¦¾à¦¨à¦¾à¦‡à¦›à§‡ à¦¨à¦¾à¦•à¦¿? ğŸ¦",  
  "à¦¤à§à¦‡ à¦¤à§‹ à¦¬à¦¾à¦²à¦¤à¦¿ à¦›à¦¾à§œà¦¾ à¦—à§‹à¦¸à¦² à¦•à¦°à¦¤à§‡ à¦šà¦¾à¦¸ ğŸª£",  
  "à¦¤à§à¦‡ à¦ªà§‡à¦à§Ÿà¦¾à¦œ à¦•à§‡à¦Ÿà§‡ à¦¹à¦¾à¦¸à¦¿à¦¸ ğŸ˜¹",  
  "à¦¤à§‹à¦° à¦•à¦ªà¦¾à¦²à§‡ à¦ªà§à¦°à§‡à¦® à¦¨à§‡à¦‡, à¦¡à¦¾à¦¸à§à¦Ÿà¦¬à¦¿à¦¨à§‡à¦“ à¦°à¦¿à¦œà§‡à¦•à§à¦Ÿ ğŸ˜”",  
  "à¦¤à§à¦‡ à¦«à§à¦¯à¦¾à¦¨ à¦›à¦¾à§œà¦¾ à¦—à¦°à¦® à¦•à¦‡à¦°à¦¸ ğŸ˜“",  
  "à¦¤à§à¦‡ à¦¸à§‡à¦‡, à¦¯à¦¾à¦°à§‡ à¦°à¦¿à¦®à§à¦­ à¦¦à¦¿à¦²à§‡à¦“ 'seen' à¦•à¦°à§‡ à¦¨à¦¾ ğŸ« ",  
  "à¦¤à§‹à¦° à¦®à§à¦–à§‡ à¦šà¦¾ à¦–à§‡à¦²à§‡ à¦šà¦¾ à¦¨à¦¿à¦œà§‡à¦‡ à¦²à¦œà§à¦œà¦¾ à¦ªà¦¾à§Ÿ â˜•",  
  "à¦¤à§‹à¦° à¦˜à¦¾à§œà§‡ à¦²à¦¾à¦¥à¦¿ à¦¦à¦¿à¦²à§‡ à¦²à¦¾à¦¥à¦¿ à¦¬à§à¦¯à¦¥à¦¾ à¦ªà¦¾à§Ÿ ğŸ˜µ",  
  "à¦¤à§à¦‡ WiFi à¦›à¦¾à§œà¦¾à¦“ disconnect ğŸ¤¡",  
  "à¦¤à§à¦‡ à¦†à¦›à¦¿à¦¸ à¦¤à¦¬à§à¦“ à¦¨à¦¾à¦‡ ğŸ¤·â€â™‚ï¸",  
  "à¦¤à§‹à¦° à¦®à¦—à¦œà§‡ à¦—à§‹à¦²à¦®à¦¾à¦² à¦šà¦²à¦›à§‡, à¦¸à¦¾à¦°à§à¦­à¦¾à¦° à¦¡à¦¾à¦‰à¦¨ ğŸ”»",  
  "à¦¤à§à¦‡ à¦•à¦²à¦¾ à¦–à§‡à§Ÿà§‡ à¦•à¦²à¦¾à¦° à¦šà¦¾à¦®à§œà¦¾à§Ÿ à¦ªà¦¿à¦›à¦²à¦¾à¦‡à¦›à¦¸ ğŸŒ",  
  "à¦¤à§‹à¦° à¦¨à¦¾à¦®à§‡ à¦¤à§‹ à¦ªà§à¦°à§‡à¦®à¦¿à¦•à¦¾à¦°à¦¾à¦“ 'à¦¨à¦¾' à¦¬à¦²à§‡ ğŸ˜­",  
  "à¦¤à§à¦‡ à¦›à¦¾à¦¤à¦¾ à¦›à¦¾à§œà¦¾à¦“ à¦­à¦¿à¦œà¦¸, à¦•à¦¾à¦°à¦£ à¦¬à§à¦¦à§à¦§à¦¿ à¦—à¦²à§‡ à¦ªà§œà¦›à§‡ â˜”",  
  "à¦¤à§à¦‡ à¦ªà§à¦°à§‡à¦® à¦•à¦°à¦¤à§‡ à¦—à§‡à¦²à§‡ à¦®à§‡à§Ÿà§‡à¦°à¦¾ VPN à¦¦à¦¿à§Ÿà§‡ à¦ªà¦¾à¦²à¦¾à§Ÿ ğŸ§â€â™€ï¸ğŸ“¡",  
  "à¦¤à§à¦‡ à¦ªà§à¦°à¦ªà§‹à¦œ à¦•à¦°à¦²à§‡ Reject à¦¬à¦¾à¦Ÿà¦¨ à¦—à¦°à¦® à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿ ğŸ”¥",  
  "à¦¤à§‹à¦° à¦›à¦¬à¦¿ à¦¦à§‡à¦–à§‡ FaceApp uninstall à¦¹à§Ÿ ğŸ˜¬",  
  "à¦¤à§à¦‡ à¦à¦¤ à¦—à¦¾à¦§à¦¾, Google à¦¤à§‹à¦•à§‡ à¦¸à¦¾à¦°à§à¦š à¦•à¦°à¦¤à§‡ à¦­à§Ÿ à¦ªà¦¾à§Ÿ ğŸ”",  
  "à¦¤à§‹à¦° à¦®à¦¤ à¦®à¦¾à¦¨à§à¦· 240p à¦¤à§‡à¦“ à¦¬à¦¾à¦œà§‡ à¦¦à§‡à¦–à¦¾ à¦¯à¦¾à§Ÿ ğŸ“º",  
  "à¦¤à§‹à¦° à¦®à¦¤ à¦†à¦‡à¦¡à¦¿à§Ÿà¦¾ à¦¦à¦¿à¦²à§‡ Elon Musk à¦²à¦œà§à¦œà¦¾ à¦ªà¦¾à§Ÿ ğŸš€",  
  "à¦¤à§à¦‡ exam à¦¦à¦¿à¦²à§‡ à¦ªà§à¦°à¦¶à§à¦¨ à¦­à§à¦² à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿ âŒ",  
  "à¦¤à§à¦‡ à¦²à¦œà§‡à¦¨à§à¦¸ à¦•à¦¿à¦¨à§‡ à¦–à¦¾à¦²à¦¿ wrapper à¦–à¦¾à¦¸ ğŸ¬",  
  "à¦¤à§à¦‡ à¦¸à§‡à¦‡ à¦›à§‡à¦²à§‡, à¦¯à¦¾à¦°à§‡ à¦¬à¦²à§‡ 'à¦­à§à¦² à¦œà¦¨à§à¦®' ğŸ˜",  
  "à¦¤à§à¦‡ CPU à¦›à¦¾à§œà¦¾ à¦•à¦®à§à¦ªà¦¿à¦‰à¦Ÿà¦¾à¦° ğŸ§ ğŸ’»",  
  "à¦¤à§à¦‡ à¦à¦¾à¦² à¦–à§‡à¦²à§‡ à¦ªà¦¾à¦¨à¦¿ à¦¨à¦¾, à¦†à¦—à§à¦¨ à¦–à¦¾à¦¸ ğŸ”¥",  
  "à¦¤à§‹à¦° à¦¹à¦¾à¦¸à¦¿ à¦¶à§à¦¨à¦²à§‡ à¦°à§‹à¦¬à¦Ÿ à¦•à§à¦°à§à¦¯à¦¾à¦¶ à¦–à¦¾à§Ÿ ğŸ¤–",  
  "à¦¤à§à¦‡ à¦ªà¦¿à§Ÿà¦¾à¦œà§‡à¦° à¦¦à¦¾à¦®à§‡ à¦¬à¦¿à¦•à§à¦°à¦¿ à¦¹à¦¬à¦¿ ğŸ§…",  
  "à¦¤à§à¦‡ à¦¨à¦¾à¦®à¦¤à¦¾ à¦­à§à¦²à§‡ à¦—à§‡à¦›à¦¿à¦¸, à¦¤à§‹à¦° à¦¬à¦¾à¦šà§à¦šà¦¾à¦“ à¦¨à¦¾ à¦œà¦¾à¦¨à¦¬à§‡ à§¨xà§¨ = à§ª ğŸ˜­",  
  "à¦¤à§à¦‡ à¦¨à¦¦à§€à¦° à¦ªà¦¾à¦¶à§‡ à¦¦à¦¾à¦à§œà¦¿à§Ÿà§‡ à¦¡à§à¦¬à§‡ à¦¯à¦¾à¦¸ ğŸ˜‘",  
  "à¦¤à§à¦‡ à¦à¦®à¦¨ à¦—à¦°à§, à¦¯à¦¾à¦°à§‡ à¦¦à§à¦§ à¦¨à¦¾, à¦¦à§à¦§à¦“ à¦­à§Ÿ à¦ªà¦¾à§Ÿ ğŸ˜±",  
  "à¦¤à§à¦‡ à¦¤à§‹ à¦¡à¦¿à¦²à¦¿à¦Ÿ à¦•à¦°à¦¾ à¦«à¦¾à¦‡à¦², à¦¯à¦¾à¦° à¦¬à§à¦¯à¦¾à¦•à¦†à¦ªà¦“ à¦¨à¦¾à¦‡ ğŸ—‘ï¸",  
  "à¦¤à§‹à¦° à¦Ÿà¦¾à¦‡à¦ªà§‡à¦° à¦‰à¦ªà¦° à¦…à§à¦¯à¦¾à¦¨à§à¦Ÿà¦¿à¦­à¦¾à¦‡à¦°à¦¾à¦¸ à¦šà¦²à§‡ à¦¨à¦¾ ğŸ›‘",  
  "à¦¤à§à¦‡ à¦«à§‹à¦¨à§‡ à¦šà¦¾à¦°à§à¦œ à¦¨à§‡à¦‡, à¦•à§à¦¯à¦¾à¦¬à¦²à¦“ à¦¨à¦¾à¦‡, à¦¬à§à¦¦à§à¦§à¦¿à¦“ à¦¨à¦¾à¦‡ ğŸ˜©",  
  "à¦¤à§à¦‡ à¦¤à§‹ à¦¬à¦¾à¦¤à¦¾à¦¸ à¦›à¦¾à§œà¦¾ à¦¸à¦¾à¦‡à¦•à§‡à¦² ğŸš²",  
  "à¦¤à§à¦‡ à¦•à§‹à¦•à§‡à¦° à¦¬à§‹à¦¤à¦²à§‡ à¦ªà¦¾à¦¨à¦¿ ğŸ§ƒ",  
  "à¦¤à§à¦‡ à¦¨à¦·à§à¦Ÿ à¦«à§à¦¯à¦¾à¦¨, à¦˜à§‹à¦°à¦¸ à¦¨à¦¾, à¦¶à¦¬à§à¦¦ à¦•à¦°à¦¸ ğŸ’¨",  
  "à¦¤à§à¦‡ à¦¤à§‹ à¦°à¦¾à¦¸à§à¦¤à¦¾à¦° à¦ªà¦¾à¦¶à§‡à¦° à¦ªà¦¾à¦à¦•à¦¾ à¦†à¦® â€“ à¦•à§‡à¦“ à¦–à¦¾à§Ÿ à¦¨à¦¾ ğŸ¥­",  
  "à¦¤à§à¦‡ à¦à¦¤ à¦¹à¦¿à¦‰à¦®à¦¿à¦²à¦¿à§Ÿà§‡à¦Ÿà§‡à¦¡ à¦¯à§‡, à¦«à§‡à¦¸à¦¬à§à¦•à§‡à¦“ Friend Request à¦†à¦¸à§‡à¦¨à¦¾ ğŸ˜µ",  
  "à¦¤à§à¦‡ à¦à¦®à¦¨ à¦¬à§‹à¦•à¦¾, à¦¤à§‹à¦° à¦—à§à¦—à¦² à¦“ à¦¤à§‹à¦•à§‡ à¦¸à¦¾à¦°à§à¦š à¦¦à§‡à§Ÿ à¦¨à¦¾ ğŸ”",  
  "à¦¤à§à¦‡ à¦¯à§‡ à¦®à¦¾à¦¨à§à¦·à§‡à¦° à¦®à¦¤à§‹ à¦®à¦¾à¦¨à§à¦· à¦¨à¦¾, à¦°à§‹à¦¬à¦Ÿ à¦¹à¦‡à¦²à§‡à¦“ à¦²à¦œà§à¦œà¦¾ à¦ªà¦¾à¦‡à¦¤ ğŸ¤–",  
  "à¦¤à§à¦‡ à¦šà§à¦¯à¦¾à¦Ÿà¦œà¦¿à¦ªà¦¿à¦Ÿà¦¿à¦¤à§‡ à¦ªà§à¦°à¦¶à§à¦¨ à¦•à¦°à¦²à§‡ à¦“ à¦šà§à¦ª à¦®à¦¾à¦°à§‡ ğŸ¤«",  
  "à¦¤à§à¦‡ à¦²à¦¾à¦‡à¦­à§‡ à¦—à§‡à¦²à§‡ à¦¸à¦¬à¦¾à¦‡ à¦…à¦«à¦²à¦¾à¦‡à¦¨à§‡ à¦¯à¦¾à§Ÿ ğŸ“µ",  
  "à¦¤à§à¦‡ à¦¸à¦¿à¦¨à§‡à¦®à¦¾à¦° à¦–à¦²à¦¨à¦¾à§Ÿà¦• à¦¹à¦‡à¦¤à§‡ à¦ªà¦¾à¦°à¦¸ à¦¨à¦¾, à¦•à¦¾à¦°à¦£ à¦¤à¦¾à¦°à¦¾ à¦¸à§à¦¨à§à¦¦à¦° à¦¥à¦¾à¦•à§‡ ğŸ¬",  
  "à¦¤à§‹à¦° à¦œà¦¨à§à¦®à¦¦à¦¿à¦¨à§‡ Facebook à¦“ notification à¦¦à§‡à§Ÿ à¦¨à¦¾ ğŸ‚",  
  "à¦¤à§à¦‡ à¦¯à§‡à¦‡ à¦®à§‡à§Ÿà§‡à¦°à§‡ à¦ªà¦›à¦¨à§à¦¦ à¦•à¦°à¦¸, à¦¸à§‡ à¦¤à§‹à¦° à¦—à¦¾à¦²à¦¿ à¦²à¦¿à¦¸à§à¦Ÿà§‡ ğŸ§â€â™€ï¸â¡ï¸ğŸ“µ",  
  "à¦¤à§à¦‡ à¦Ÿà¦¾à¦•à¦¾ à¦›à¦¾à§œà¦¾ à¦à¦Ÿà¦¿à¦à¦® ğŸ’¸",  
  "à¦¤à§à¦‡ à¦¸à¦¿à¦—à¦¨à§à¦¯à¦¾à¦² à¦›à¦¾à§œà¦¾à¦“ à¦Ÿà§à¦°à¦¾à¦«à¦¿à¦• à¦œà§à¦¯à¦¾à¦® ğŸ¤¯",  
  "à¦¤à§à¦‡ à¦°à¦¾à¦¤ à§©à¦Ÿà¦¾à¦° à¦«à§‡à¦• à¦•à¦² ğŸ“",  
  "à¦¤à§à¦‡ à¦à¦¤ à¦¬à¦¾à¦œà§‡, à¦¤à§‹à¦°à§‡ YouTube demonetize à¦•à¦°à§‡ à¦¦à¦¿à§Ÿà§‡à¦›à§‡ ğŸ“‰",];
// ğŸ” Spam Function
function startSpam(api, threadID, targetID, targetName) {
    if (!activeSpam[threadID]) return;

    const gali = galiList[Math.floor(Math.random() * galiList.length)];
    const message = `âš ï¸ ${gali}\n\nğŸ‘‰ ${targetName}`;

    api.sendMessage({
        body: message,
        mentions: [{ tag: targetName, id: targetID }]
    }, threadID, () => {
        setTimeout(() => startSpam(api, threadID, targetID, targetName), 2000);
    });
}

module.exports.run = async function ({ api, event }) {
    try {
        const { senderID, threadID, mentions, body } = event;

        // âœ… Check if sender is in allowed UID list
        if (!allowedUIDs.includes(senderID)) {
            return api.sendMessage("â›” You are not allowed to use this command!", threadID);
        }

        const args = body.split(" ");
        const mentionIDs = Object.keys(mentions);

        // ğŸ›‘ STOP
        if (args[1]?.toLowerCase() === "stop") {
            if (activeSpam[threadID]) {
                const blockedID = blockedUsers[threadID];
                delete activeSpam[threadID];
                delete blockedUsers[threadID];
                return api.sendMessage("ğŸ›‘ Buski spam stopped successfully.", threadID);
            } else {
                return api.sendMessage("âš ï¸ No active spam running in this thread.", threadID);
            }
        }

        // âœ… START
        if (mentionIDs.length === 0) {
            return api.sendMessage("â— Please tag someone to start spamming.\nUsage: /buski @tag | /buski stop", threadID);
        }

        if (activeSpam[threadID]) {
            return api.sendMessage("âš ï¸ Spam already running in this thread.\nUse `/buski stop` first.", threadID);
        }

        const targetID = mentionIDs[0];
        const targetName = mentions[targetID];

        activeSpam[threadID] = true;
        blockedUsers[threadID] = targetID;

        api.sendMessage(`ğŸ”¥ Starting Buski spam on: ${targetName}\n\nğŸš« ${targetName} is blocked from using commands.`, threadID, () => {
            startSpam(api, threadID, targetID, targetName);
        });

    } catch (err) {
        console.error("âŒ Error in /buski command:", err);
        return api.sendMessage("âš ï¸ Something went wrong. Check console for error.", event.threadID);
    }
};

// â›” Prevent blocked user from using other commands
module.exports.handleEvent = function ({ api, event }) {
    const { senderID, threadID, body } = event;
    const blockedID = blockedUsers[threadID];

    if (blockedID && senderID === blockedID && body.startsWith("/")) {
        return api.sendMessage("ğŸš« You're being punished with gali. You can't use commands now!", threadID);
    }
};
